<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        

        function calc(){
        var total = 0;
        var qArray = document.getElementsByClassName("question");
	    var aArray = document.getElementsByClassName("answer");
        for(var i = 0; i < qArray.length; i++){
            var ans = Math.floor(eval(qArray[i].innerHTML));
            if(ans == aArray[i].value){
                qArray[i].style.textDecoration = "none";
                total += 1
            }
            else{
                qArray[i].style.textDecoration = "line-through";
            }
        }
        var result = document.getElementById("score");
        score.innerHTML = total;
    }
    function init(){
        var time = 10;
        var div = document.getElementById("div");
        var seconds = setInterval(function(){
            div.innerHTML = "남은시간 " + time;
            time--;
            if(time < 0){
                clearInterval(seconds);
                calc();
            }
        },1000);


        arrinx = ['+', '-', '*', '/'];
        var qArray = document.getElementsByClassName("question");
        var aArray = document.getElementsByClassName("answer");
        for(var i = 0; i < 4; i++){
            var front = Math.floor(Math.random() * 20) + 1;
            var end = Math.floor(Math.random() * 20) + 1;
            var idx = Math.floor(Math.random() * 4);

            if(front < end){
                var X = front;
                front = end;
                end = X;
            }

            qArray[i].innerHTML = front + arrinx[idx] + end;
            aArray[i].value = '';
            qArray[i].style.textDecoration = "none";
        }
        var ans = document.getElementById('score');
        ans.innerHTML = 0;
        
    }
    </script>
</head>
<body onload="init()">
    <h3>산수 문제를 풀어 봅시다.</h3>
    <p>수식을 계산하여 답을 입력하고 체점 버튼을 누르세요.</p>
    <div id = 'div'> </div>
    <hr>
    <form>
    <table>
        <tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
        <tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
        <tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
        <tr><td class="question"></td><td><input class="answer" type="text" size="8"></td></tr>
        <tr><td><button type="button" onclick="init()">다시</button></td>
            <td><span id="score">0</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            </td>
        
    </table>
    </form>
    </body>
</html>